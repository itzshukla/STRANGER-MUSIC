# -----------------------------------------------
# ðŸ”¸ StrangerMusic Project
# ðŸ”¹ Developed & Maintained by: Shashank Shukla (https://github.com/itzshukla)
# ðŸ“… Copyright Â© 2022 â€“ All Rights Reserved
#
# ðŸ“– License:
# This source code is open for educational and non-commercial use ONLY.
# You are required to retain this credit in all copies or substantial portions of this file.
# Commercial use, redistribution, or removal of this notice is strictly prohibited
# without prior written permission from the author.
#
# â¤ï¸ Made with dedication and love by ItzShukla
# -----------------------------------------------
from pyrogram.enums import MessageEntityType
from pyrogram.types import Message, User
from SHUKLAMUSIC import app

async def extract_user(m: Message) -> User:
    if m.reply_to_message:
        return m.reply_to_message.from_user
    msg_entities = m.entities[1] if m.text.startswith("/") else m.entities[0]
    return await app.get_users(
        msg_entities.user.id
        if msg_entities.type == MessageEntityType.TEXT_MENTION
        else int(m.command[1])
        if m.command[1].isdecimal()
        else m.command[1]
    )
